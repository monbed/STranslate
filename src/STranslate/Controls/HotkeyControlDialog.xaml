<ui:ContentDialog
    x:Class="STranslate.Controls.HotkeyControlDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:control="clr-namespace:STranslate.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:ikw="http://schemas.inkore.net/lib/ui/wpf"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.inkore.net/lib/ui/wpf/modern"
    d:DataContext="{d:DesignInstance control:HotkeyControlDialog,
                                     IsDesignTimeCreatable=False}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    BorderThickness="0,1,0,0"
    CornerRadius="8"
    DataContext="{Binding RelativeSource={RelativeSource Self}}"
    PreviewKeyDown="OnPreviewKeyDown"
    Style="{DynamicResource DefaultContentDialogStyle}"
    mc:Ignorable="d">

    <ui:ContentDialog.Resources>
        <Thickness x:Key="ContentDialogPadding">0</Thickness>
        <Thickness x:Key="ContentDialogTitleMargin">0</Thickness>
    </ui:ContentDialog.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="80" />
        </Grid.RowDefinitions>
        <StackPanel Margin="26,12,26,0">
            <TextBlock
                FontSize="{DynamicResource {x:Static ui:ThemeKeys.SubtitleTextBlockFontSizeKey}}"
                FontWeight="SemiBold"
                Text="{Binding WindowTitle}"
                TextWrapping="WrapWithOverflow" />
            <TextBlock VerticalAlignment="Center" Text="{DynamicResource HotkeyFunctionPrompt}" />
        </StackPanel>
        <Border
            Grid.Row="1"
            Width="400"
            Height="180"
            Margin="0,40">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ItemsControl ItemsSource="{Binding KeysToDisplay}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <ui:ElevationBorder
                                MinWidth="50"
                                MinHeight="50"
                                Margin="5,0"
                                Padding="8"
                                Background="{DynamicResource SystemControlBackgroundAccentBrush}"
                                BorderBrush="{DynamicResource {x:Static ui:ThemeKeys.ControlElevationBorderBrushKey}}"
                                BorderThickness="1"
                                CornerRadius="6">
                                <ui:ElevationBorder.Style>
                                    <Style TargetType="ui:ElevationBorder">
                                        <Style.Triggers>
                                            <!--  监听父窗口的IsActive属性  -->
                                            <DataTrigger Binding="{Binding IsActive, RelativeSource={RelativeSource AncestorType=Window}}" Value="False">
                                                <Setter Property="Background" Value="{DynamicResource AccentFillColorDisabledBrush}" />
                                                <Setter Property="Opacity" Value="0.6" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ui:ElevationBorder.Style>
                                <TextBlock
                                    Margin="5,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    FontSize="{DynamicResource STControlFontSize18}"
                                    FontWeight="Bold"
                                    Foreground="{DynamicResource TextFillColorInverseBrush}"
                                    Text="{Binding}" />
                            </ui:ElevationBorder>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </Border>
        <ui:InfoBar
            x:Name="PART_InfoBar"
            Grid.Row="1"
            VerticalAlignment="Bottom"
            IsClosable="False"
            IsOpen="True"
            Severity="Warning"
            Visibility="Collapsed">
            <ui:InfoBar.Resources>
                <FontWeight x:Key="InfoBarMessageFontWeight">SemiBold</FontWeight>
            </ui:InfoBar.Resources>
        </ui:InfoBar>

        <!--  Action buttons at the bottom of the dialog  -->
        <Border
            Grid.Row="2"
            Padding="26,0"
            Background="{DynamicResource ContentDialogBackground}"
            BorderBrush="{DynamicResource ContentDialogBorderBrush}"
            BorderThickness="0,1,0,0"
            CornerRadius="0 0 8 8">
            <ikw:SimpleStackPanel
                Margin="10,9,10,10"
                HorizontalAlignment="Center"
                Orientation="Horizontal"
                Spacing="8">
                <Button
                    x:Name="OverwriteBtn"
                    MinWidth="100"
                    MinHeight="36"
                    Click="OnOverwriteClick"
                    Content="{DynamicResource Overwrite}"
                    Style="{StaticResource AccentButtonStyle}"
                    Visibility="Collapsed" />
                <Button
                    x:Name="SaveBtn"
                    MinWidth="100"
                    MinHeight="36"
                    Click="OnSaveClick"
                    Content="{DynamicResource Save}"
                    Style="{StaticResource AccentButtonStyle}" />
                <Button
                    MinWidth="100"
                    MinHeight="36"
                    Click="OnResetClick"
                    Content="{DynamicResource Reset}" />
                <Button
                    MinWidth="100"
                    MinHeight="36"
                    Click="OnDeleteClick"
                    Content="{DynamicResource Delete}"
                    Foreground="{DynamicResource SystemFillColorCriticalBrush}" />
                <Button
                    MinWidth="100"
                    MinHeight="36"
                    Click="OnCancelClick"
                    Content="{DynamicResource Cancel}" />
            </ikw:SimpleStackPanel>
        </Border>
    </Grid>

</ui:ContentDialog>